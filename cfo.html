
<!DOCTYPE html>
<html>
<head>
    <title>Alltech CFO Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase.js" type="module"></script>
    <script src="js/cfo.js" type="module"></script>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <script type="module">
        import { supabase } from './js/supabase.js';

        const { data } = await supabase.auth.getUser();
        const role = data?.user?.user_metadata?.role;

        if (!data?.user || role !== "cfo") {
            window.location.href = "index.html";
        }
    </script>
</head>
<body>
    <main>
        <button onclick="logout()" class="auth-button" style="float: right;">Logout</button>
        <h2>Welcome, CFO</h2>

        <section class="dashboard-section">
            <h3>Invoice Summary</h3>
            <ul id="invoiceStats" class="metrics-list"></ul>
        </section>

        <section class="dashboard-section">
            <h3>Payroll vs Revenue</h3>
            <ul id="payrollSummary" class="metrics-list"></ul>
        </section>

        <section class="dashboard-section">
            <h3>Gross Margin Overview</h3>
            <ul id="marginSummary" class="metrics-list"></ul>
        </section>

        <section class="dashboard-section">
            <h3>AR Aging & Funding Alerts</h3>
            <ul id="alertsList" class="data-list"></ul>
        </section>
    </main>
</body>
</html>
