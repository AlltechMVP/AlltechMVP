
<!DOCTYPE html>
<html>
<head>
    <title>Alltech Client Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase.js" type="module"></script>
    <script src="js/client.js" type="module"></script>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <script type="module">
        import supabase from './js/supabase.js';

        const { data } = await supabase.auth.getUser();
        const role = data?.user?.user_metadata?.role;
        const email = data?.user?.email;

        if (!data?.user || role !== "client") {
            window.location.href = "index.html";
        } else {
            document.getElementById("userInfo").innerHTML = `
                <p><strong>Logged in as:</strong> ${email}</p>
                <p><strong>Role:</strong> ${role}</p>
            `;
        }
    </script>
    <script type="module">
        import supabase from './js/supabase.js';
        
        window.logout = async () => {
            await supabase.auth.signOut();
            window.location.href = "index.html";
        };
    </script>
</head>
<body>
    <main>
        <div id="userInfo"></div>
        <button onclick="logout()" class="auth-button" style="float: right;">Logout</button>
        <h2>Welcome, Client</h2>
        <label>Filter by job:
            <select id="jobFilter" onchange="loadCandidates()"></select>
        </label>
        <table border="1" cellpadding="8" id="candidateTable">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Job</th>
                    <th>Status</th>
                    <th>Resume</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </main>
</body>
</html>
